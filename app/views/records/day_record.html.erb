<!DOCTYPE html>
<html>
  <head>
    <title>CalorieFriends</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body>
     <p>ここは食事・カロリーを記録するページです</p>
      <span class="name">
        <% if @user.present? %>
          <a href="<%= user_path(@user) %>">
           <span>マイページ</span><%= @user.name %>
          </a>
        <% else %>
         <a href="<%= root_path %>">
          <span>トップページ</span>
        </a>
        <% end %>
      </span>
       <!-- データの表示 -->

<h2>新しい画像をアップロード</h2>
<%= form_with(model: @image, url: images_path, local: true, multipart: true) do |form| %>
  <div>
    <%= form.label :breakfast_img, '朝食の画像' %>
    <%= form.file_field :breakfast_img %>
  </div>

  <div>
    <%= form.label :lunch_img, '昼食の画像' %>
    <%= form.file_field :lunch_img %>
  </div>

  <div>
    <%= form.label :dinner_img, '夕食の画像' %>
    <%= form.file_field :dinner_img %>
  </div>

  <div>
    <%= form.label :snack_img, 'おやつの画像' %>
    <%= form.file_field :snack_img %>
  </div>

  <div>
    <%= form.submit 'アップロード' %>
  </div>
<% end %>

<%= link_to '一覧に戻る', images_path %>
    
<h2>Meals</h2>
<% @meals.each do |meal| %>
  <p><%= meal.name %></p> <!-- 'meal.name' を必要に応じて 'meal.breakfast', 'meal.lunch' などに変更 -->
<% end %>

<%= form_with model: Meal.new, url: meals_path, method: :post do |form| %>
  <!-- 各食事タイプに対して上記の text_field を 'breakfast', 'lunch', 'dinner', 'snack' など必要に応じて繰り返す -->
  <label for="meal_breakfast">Breakfast:</label>
  <%= form.text_field :breakfast, id: "meal_breakfast" %>

  <label for="meal_lunch">Lunch:</label>
  <%= form.text_field :lunch, id: "meal_lunch" %>

  <label for="meal_dinner">Dinner:</label>
  <%= form.text_field :dinner, id: "meal_dinner" %>

  <label for="meal_snack">Snack:</label>
  <%= form.text_field :snack, id: "meal_snack" %>

  

  <%= form.submit %>
<% end %>

<h2>Calories</h2>
<% @calories.each do |calorie| %>
  <p>Breakfast: <%= calorie.breakfast_cal %></p>
  <p>Lunch: <%= calorie.lunch_cal %></p>
  <p>Dinner: <%= calorie.dinner_cal %></p>
  <p>Snack: <%= calorie.snack_cal %></p>
  <p>Total: <%= calorie.total_calorie %></p>
<% end %>

<%= form_with model: Calorie.new, url: calories_path, method: :post do |form| %>
  <label for="calorie_breakfast_cal">Breakfast Calories:</label>
  <%= form.number_field :breakfast_cal, id: "calorie_breakfast_cal" %>

  <label for="calorie_lunch_cal">Lunch Calories:</label>
  <%= form.number_field :lunch_cal, id: "calorie_lunch_cal" %>

  <label for="calorie_dinner_cal">Dinner Calories:</label>
  <%= form.number_field :dinner_cal, id: "calorie_dinner_cal" %>

  <label for="calorie_snack_cal">Snack Calories:</label>
  <%= form.number_field :snack_cal, id: "calorie_snack_cal" %>

  <%= form.submit %>
<% end %>
    <%#= form_with model: Image.new, url: images_path, method: :post, local: true, multipart: true do |form| %>
      <%#<label for="image_file">Image:</label>
      <%#= form.file_field :file, id: "image_file" %>
      <%#= form.submit 'Upload Image' %>
    <%# end %>

    <%#= form_with model: Meal.new, url: meals_path, method: :post do |form| %>
      <%#<label for="meal_name">Meal Name:</label>
      <%= form.text_field :name, id: "meal_name" %>
    <%# end %>

      <%#<label for="meal_calories">Calories:</label>
      <%= form.number_field :calories, id: "meal_calories" %>

      <%#= form.submit "Save Meal" %>
    <%# end %>



  </body>
</html>